<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/bootstrap.min.css}"/>
  <link rel="stylesheet" type="text/css" media="all" th:href="@{/css/style.css}"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,900;1,300&display=swap" rel="stylesheet">
    <title>Portal - Login</title>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-6 offset-3">
      <div class="row loginBorder">
        <div class="col">
          <a th:href="@{/home}"><img class="img-fluid mt-5" th:src="@{/img/logo_color.png}"></a>
        </div>
        <div class="col">
          <h1 class="text-center text-dark">Login</h1>
          <form th:action="@{/login}" method="post">
            <div class="form-group mb-3">
              <input type="text" id="username" name="username" class="form-control form-control-md" placeholder="Enter username" onkeyup="enableSubmitCheck()"/>
            </div>
            <div class="form-group mb-4">
              <input type="password" id="password" name="password" class="form-control form-control-md" placeholder="Enter password" onkeyup="enableSubmitCheck()"/>
            </div>
            <div class="form-group d-flex justify-content-center mb-3">
              <input class="loginButtonDisabled" id="submit" type="submit" value="Login" disabled>
            </div>
          </form>
          <p class="loginSubtext">Not a member yet? <a class="registerLink" th:href="@{/user/register}">Register</a></p>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  const submit = document.getElementById("submit");

  const enableSubmitCheck = () => {
    checkUsername();
    checkPassword();
    if (checkUsername() && checkPassword()) {
      submit.removeAttribute("disabled");
      submit.classList.remove("loginButtonDisabled");
      submit.classList.add("loginButton");
    } else {
      submit.classList.remove("loginButton");
      submit.classList.add("loginButtonDisabled");
      submit.setAttribute("disabled", "disabled");
    }
  }
  const checkUsername = () => {
    let userName = document.getElementById("username").value;
    if (userName === '') {
      submit.setAttribute("disabled", "disabled");
      return false
    } else {
      submit.removeAttribute("disabled");
      return true
    }
  }

  const checkPassword = () => {
    let password = document.getElementById("password").value;
    if (password === '') {
      submit.setAttribute("disabled", "disabled");
      return false
    } else {
      submit.removeAttribute("disabled");
      return true
    }
  }
</script>
</body>
</html>